---
title: "Testing DOT Graph Display"
output: html_notebook
---
 
```{r}
library(DiagrammeR)
```
 

```{r}

# Create a DOT graph
graph2 <- grViz ("
  digraph {

    A [fillcolor=red, style=filled];
    B [fillcolor=blue, style=filled];
    C [fillcolor=green, style=filled];
    'A' -> B;
    B -> C;
    C -> A;
  }")

graph2


```


```{r}

si <- c("Bgd_Si.350.MeV.n_4", "Bgd_Si.350.MeV.n_8", "Bgd_Si.350.MeV.n_24", "Bgd_Si.350.MeV.n_48", "FociPerGy_Si.350.MeV.n_4", "FociPerGy_Si.350.MeV.n_8", "FociPerGy_Si.350.MeV.n_24", "FociPerGy_Si.350.MeV.n_48")

ar <- c("Bgd_Ar.350.MeV.n_4", "Bgd_Ar.350.MeV.n_8", "Bgd_Ar.350.MeV.n_24", "Bgd_Ar.350.MeV.n_48", "FociPerGy_Ar.350.MeV.n_4", "FociPerGy_Ar.350.MeV.n_8", "FociPerGy_Ar.350.MeV.n_24", "FociPerGy_Ar.350.MeV.n_48")

fe <- c("Bgd_Fe.600.MeV.n_4", "Bgd_Fe.600.MeV.n_8", "Bgd_Fe.600.MeV.n_24", "Bgd_Fe.600.MeV.n_48", "FociPerGy_Fe.600.MeV.n_4", "FociPerGy_Fe.600.MeV.n_8", "FociPerGy_Fe.600.MeV.n_24", "FociPerGy_Fe.600.MeV.n_48")

xray <- c("Bgd_X.ray_4", "Bgd_X.ray_24", "Bgd_X.ray_48", "FociPerGy_X.ray_4", "FociPerGy_X.ray_24", "FociPerGy_X.ray_48")


```





```{r}

convertNELtoStr <- function(dag, colorNodes) { # dag: Formal graphNEL, colorNodes: List
  nodes <- dag@nodes
  ans <- 'digraph { '
  
  # Add nodes
  for (node in nodes) {
    ans <- paste0(ans,'"',node,'";')
  }
  
  # Add edges
  for (node in nodes) {
    for (out_node_index in dag@edgeL[[node]]$edges) {
      ans <- paste0(ans,'"', node,'" -> "', nodes[out_node_index], '";')
    }
  }
  ans <- paste0(ans,'}')
  
  return(ans)
}


answer <- convertNELtoStr(graph, colorNodes)
grViz(answer)
```





#create a simple DOT graph and load it in RStudio
dot("digraph {A -> B;}")
#to produce a dynamic document including a diagram in 'rmarkdown'
## Not run:
```{r echo=FALSE, results='asis'}
library(DOT)

```
## End(Not run)
#create a DOT graph and export a SVG file to the working directory
dot("digraph {A -> B; B -> C; B -> D;}", file = "myfile.svg")
#export the example above in PostScript format
dot("digraph {A -> B; B -> C; B -> D;}", file = "myfile.ps")
#create a DOT graph and save the script in a string object in R
myString <- dot("digraph {A -> B;}", return = "verbatim")

```{r}

dot('digraph {"A" -> B; B -> C; B -> D;A;}', file = "myfile.svg")
dot(answer, file = "test.svg")
dot(answer)
```


